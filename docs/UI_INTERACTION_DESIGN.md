# UI交互设计说明

## 概述

本文档说明了语音桌面助手中ASR（语音识别）操作的UI交互设计，包括按钮布局、状态显示和操作流程。

## 设计原则

1. **主次分明**：主要操作突出显示，辅助操作次要显示
2. **状态清晰**：通过状态指示器和按钮状态明确当前状态
3. **流程引导**：通过按钮的显示/隐藏引导用户完成操作流程
4. **操作反馈**：每个操作都有明确的反馈（Toast提示）

## 界面布局

### 顶部状态栏

```
┌─────────────────────────────────────────────────────────────┐
│ [状态指示器]  [主操作按钮]  [辅助操作]  |  [工具按钮]      │
└─────────────────────────────────────────────────────────────┘
```

### 状态指示器

显示当前系统状态，包括：
- **准备就绪**：系统已连接，可以开始语音输入
- **正在接收语音输入...**：ASR正在工作，实时接收语音
- **已暂停（可继续编辑）**：ASR已暂停，但可以继续编辑文本
- **正在处理...**：系统正在处理请求
- **未连接到服务器**：后端服务未连接

### 按钮分组

#### 1. 主操作按钮（Primary Actions）

**idle状态**：
- **开始语音输入** 🎤
  - 大按钮，绿色渐变
  - 点击后开始ASR录音
  - 禁用条件：未连接或正在处理

**recording/paused状态**：
- **结束并保存** ✓
  - 大按钮，深绿色渐变
  - 点击后停止录音并保存到历史记录
  - 禁用条件：未连接或正在处理
  - 操作后显示Toast："已保存到历史记录"

#### 2. 辅助操作按钮（Secondary Actions）

仅在 `recording` 或 `paused` 状态时显示：

**recording状态**：
- **暂停** ⏸
  - 中等按钮，黄色渐变
  - 点击后暂停ASR，但可以继续编辑文本
  - Tooltip："暂停语音输入（可继续编辑）"

**paused状态**：
- **继续** ▶
  - 中等按钮，蓝色渐变
  - 点击后恢复ASR录音
  - Tooltip："恢复语音输入"

#### 3. 工具按钮（Tool Actions）

**清空** 🗑
- 仅在 `idle` 状态且有文本时显示
- 点击后清空当前编辑内容
- 需要确认对话框："确定要清空当前内容吗？此操作不可撤销。"

**复制** 📋
- 始终显示（无文本时禁用）
- 点击后复制文本到剪贴板
- Tooltip："复制文本到剪贴板"
- 操作后显示Toast："文本已复制到剪贴板"

## 操作流程

### 流程1：完整的语音输入流程

```
1. [准备就绪] → 点击"开始语音输入"
   ↓
2. [正在接收语音输入...] → ASR实时显示文本
   ↓
3. 用户可随时编辑文本（共享编辑模式）
   ↓
4. 可选：点击"暂停" → [已暂停（可继续编辑）]
   ↓
5. 可选：点击"继续" → 返回步骤2
   ↓
6. 点击"结束并保存" → 保存到历史记录
   ↓
7. [准备就绪] → 可以开始新的录音
```

### 流程2：暂停编辑流程

```
1. [正在接收语音输入...] → 点击"暂停"
   ↓
2. [已暂停（可继续编辑）] → 可以继续编辑文本
   ↓
3. 点击"继续" → 恢复ASR
   ↓
4. 或点击"结束并保存" → 保存当前内容
```

## 状态转换图

```
        idle
         │
         │ 点击"开始语音输入"
         ↓
    recording ←→ paused
         │         │
         │         │ 点击"继续"
         │         │
         │ 点击"暂停"
         │
         │ 点击"结束并保存"
         ↓
      idle (已保存)
```

## 按钮状态说明

### 禁用状态

- **开始语音输入**：未连接 或 正在处理
- **结束并保存**：未连接 或 正在处理
- **暂停/继续**：未连接
- **复制**：无文本内容

### 显示/隐藏规则

- **主操作按钮**：始终显示（根据状态切换文本和样式）
- **辅助操作按钮**：仅在 `recording` 或 `paused` 状态显示
- **清空按钮**：仅在 `idle` 状态且有文本时显示
- **复制按钮**：始终显示（无文本时禁用）

## 视觉设计

### 按钮尺寸

- **主操作按钮**：`padding: 12px 24px`，`min-width: 140px`
- **辅助操作按钮**：`padding: 10px 18px`
- **工具按钮**：`padding: 10px 16px`

### 颜色方案

- **开始**：绿色渐变（`#10b981` → `#059669`）
- **结束并保存**：深绿色渐变（`#059669` → `#047857`）
- **暂停**：黄色渐变（`#f59e0b` → `#d97706`）
- **继续**：蓝色渐变（`#3b82f6` → `#2563eb`）
- **工具按钮**：浅色背景，边框样式

### 分组分隔

- 使用1px分隔线区分不同按钮组
- 分隔线颜色：`var(--color-border)`
- 分隔线高度：24px

## 用户反馈

### Toast提示

- **保存成功**："已保存到历史记录"（绿色）
- **复制成功**："文本已复制到剪贴板"（绿色）
- **复制失败**："没有可复制的文本"（红色）
- **清空成功**："内容已清空"（信息）

### 状态指示器

- **动画效果**：录音中状态有脉冲动画
- **颜色编码**：
  - 就绪：灰色
  - 录音中：绿色（脉冲）
  - 已暂停：黄色
  - 处理中：蓝色（脉冲）

## 无障碍支持

- 所有按钮都有 `aria-label` 属性
- 状态指示器使用 `role="status"` 和 `aria-live="polite"`
- 按钮禁用状态有明确的视觉反馈
- Tooltip提供详细的操作说明

## 改进点

相比之前的版本：

1. ✅ **明确的主操作**：根据状态显示不同的主操作按钮
2. ✅ **清晰的保存行为**："结束并保存"明确表示会保存
3. ✅ **更好的状态描述**：状态文本更详细和清晰
4. ✅ **操作分组**：按钮按功能分组，视觉层次更清晰
5. ✅ **操作反馈**：每个操作都有Toast反馈
6. ✅ **清空功能**：添加了清空按钮，方便重新开始

## 未来改进方向

1. **快捷键支持**：添加键盘快捷键（如空格键开始/暂停）
2. **操作历史**：显示最近的操作历史
3. **批量操作**：支持批量保存多个会话
4. **自定义按钮**：允许用户自定义按钮布局

