# ASRç»“æœåˆ°å‰ç«¯æ˜¾ç¤ºçš„å»¶è¿Ÿåˆ†æ

æœ¬æ–‡æ¡£è¯¦ç»†åˆ†æä»ASRæœåŠ¡å™¨è¿”å›è¯†åˆ«ç»“æœåˆ°å‰ç«¯UIæ˜¾ç¤ºçš„å®Œæ•´æ•°æ®æµå’Œå»¶è¿Ÿã€‚

## ğŸ“Š å®Œæ•´æ•°æ®æµè·¯å¾„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ASRç»“æœ â†’ å‰ç«¯æ˜¾ç¤ºçš„å®Œæ•´è·¯å¾„                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. ASRæœåŠ¡å™¨è¯†åˆ«å®Œæˆ
   â””â”€> ç”Ÿæˆè¯†åˆ«ç»“æœï¼ˆJSONï¼‰
   â””â”€> GZIPå‹ç¼©
   â””â”€> å°è£…ä¸ºäºŒè¿›åˆ¶åè®®åŒ…
   â””â”€> é€šè¿‡WebSocketå‘é€
   â±ï¸ å»¶è¿Ÿ: ~1-5msï¼ˆæœåŠ¡ç«¯å¤„ç†ï¼‰

2. VolcanoASRProvider æ¥æ”¶
   â”œâ”€> aiohttp WebSocketæ¥æ”¶äºŒè¿›åˆ¶æ¶ˆæ¯
   â”‚   â±ï¸ ç½‘ç»œå»¶è¿Ÿ: 10-50msï¼ˆå–å†³äºç½‘ç»œï¼‰
   â”‚
   â”œâ”€> ResponseParser.parse_response()
   â”‚   â”œâ”€> è§£æåè®®å¤´
   â”‚   â”œâ”€> GZIPè§£å‹ç¼©
   â”‚   â””â”€> JSON.loads()
   â”‚   â±ï¸ å¤„ç†å»¶è¿Ÿ: ~0.5-2ms
   â”‚
   â””â”€> _handle_recognition_result()
       â”œâ”€> æå–text
       â”œâ”€> _detect_definite_utterance()ï¼ˆæ£€æŸ¥æ˜¯å¦ä¸ºç¡®å®šç»“æœï¼‰
       â””â”€> è°ƒç”¨ self._on_text_callback()
       â±ï¸ å¤„ç†å»¶è¿Ÿ: ~0.1ms

3. VoiceService._on_asr_text_received()
   â”œâ”€> æ›´æ–° self._current_text
   â”œâ”€> æ—¥å¿—è®°å½•ï¼ˆå¦‚æœæ˜¯ç¡®å®šç»“æœï¼‰
   â””â”€> è°ƒç”¨ self._on_text_callback()
   â±ï¸ å¤„ç†å»¶è¿Ÿ: ~0.05ms

4. API Server on_text_callback()
   â”œâ”€> æ„é€ æ¶ˆæ¯å­—å…¸
   â”‚   â”œâ”€> type: "text_update" æˆ– "text_final"
   â”‚   â”œâ”€> text: è¯†åˆ«æ–‡æœ¬
   â”‚   â”œâ”€> start_time, end_timeï¼ˆå¦‚æœæ˜¯ç¡®å®šç»“æœï¼‰
   â”‚   â””â”€> app_id
   â”‚   â±ï¸ å¤„ç†å»¶è¿Ÿ: ~0.01ms
   â”‚
   â””â”€> broadcast(message)
       â””â”€> send_message_to_current_websocket()
           â””â”€> websocket.send_json()
           â±ï¸ åºåˆ—åŒ–+å‘é€: ~0.5-2ms

5. å‰ç«¯ WebSocket æ¥æ”¶
   â”œâ”€> ws.onmessage è§¦å‘
   â”‚   â±ï¸ ç½‘ç»œå»¶è¿Ÿ: 1-10msï¼ˆæœ¬åœ°é€šä¿¡ï¼‰
   â”‚
   â”œâ”€> JSON.parse(event.data)
   â”‚   â±ï¸ å¤„ç†å»¶è¿Ÿ: ~0.1ms
   â”‚
   â”œâ”€> æ£€æŸ¥ app_id åŒ¹é…
   â”‚   â±ï¸ å¤„ç†å»¶è¿Ÿ: ~0.001ms
   â”‚
   â””â”€> switch (data.type)
       â±ï¸ å¤„ç†å»¶è¿Ÿ: ~0.001ms

6. React çŠ¶æ€æ›´æ–°
   â”œâ”€> case 'text_update':
   â”‚   â””â”€> blockEditorRef.current?.appendAsrText(text, false)
   â”‚
   â””â”€> case 'text_final':
       â””â”€> blockEditorRef.current?.appendAsrText(text, true, timeInfo)
       â±ï¸ å‡½æ•°è°ƒç”¨: ~0.001ms

7. BlockEditor.appendAsrText()
   â”œâ”€> setBlocks((prev) => { ... })
   â”‚   â”œâ”€> æ•°ç»„å¤åˆ¶: [...prev]
   â”‚   â”œâ”€> findIndex()ï¼ˆæŸ¥æ‰¾å½“å‰ASRå†™å…¥å—ï¼‰
   â”‚   â”œâ”€> æ›´æ–°blockå†…å®¹
   â”‚   â”œâ”€> å¦‚æœæ˜¯ç¡®å®šç»“æœï¼š
   â”‚   â”‚   â”œâ”€> è®¾ç½® isAsrWriting=false
   â”‚   â”‚   â”œâ”€> æ·»åŠ æ—¶é—´ä¿¡æ¯
   â”‚   â”‚   â””â”€> åˆ›å»ºæ–°çš„ASRå†™å…¥å—
   â”‚   â”œâ”€> blocksToContent()ï¼ˆç”Ÿæˆæ–‡æœ¬å†…å®¹ï¼‰
   â”‚   â””â”€> ensureBottomBufferBlock()
   â”‚   â±ï¸ å¤„ç†å»¶è¿Ÿ: ~0.5-2msï¼ˆå–å†³äºblocksæ•°é‡ï¼‰
   â”‚
   â””â”€> è§¦å‘ React é‡æ–°æ¸²æŸ“
       â±ï¸ è°ƒåº¦å»¶è¿Ÿ: ~1-5ms

8. React æ¸²æŸ“
   â”œâ”€> Virtual DOM diff
   â”‚   â±ï¸ å»¶è¿Ÿ: ~1-5msï¼ˆå–å†³äºç»„ä»¶å¤æ‚åº¦ï¼‰
   â”‚
   â”œâ”€> DOM æ›´æ–°
   â”‚   â±ï¸ å»¶è¿Ÿ: ~5-16msï¼ˆæµè§ˆå™¨æ¸²æŸ“ï¼‰
   â”‚
   â””â”€> æµè§ˆå™¨é‡ç»˜
       â±ï¸ å»¶è¿Ÿ: ~0-16msï¼ˆvsyncç­‰å¾…ï¼Œ60fps=16.67msï¼‰

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ€»å»¶è¿Ÿï¼ˆç†è®ºæœ€å°å€¼ï¼‰: ~15-35ms
æ€»å»¶è¿Ÿï¼ˆå…¸å‹å€¼ï¼‰:     ~30-80ms
æ€»å»¶è¿Ÿï¼ˆæœ€å¤§å€¼ï¼‰:     ~80-150msï¼ˆç½‘ç»œæŠ–åŠ¨ã€GCç­‰ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

## ğŸ“Š å»¶è¿Ÿåˆ†è§£ï¼ˆå…¸å‹å€¼ï¼‰

| é˜¶æ®µ | å»¶è¿Ÿ | å æ¯” | è¯´æ˜ |
|------|------|------|------|
| **ASRæœåŠ¡ç«¯** | 1-5ms | 5% | ç»“æœç”Ÿæˆã€å‹ç¼©ã€å°åŒ… |
| **ç½‘ç»œä¼ è¾“ï¼ˆASRâ†’åç«¯ï¼‰** | 10-50ms | 40% | âš ï¸ **ä¸»è¦ç“¶é¢ˆä¹‹ä¸€** |
| **åç«¯å¤„ç†** | 1-3ms | 3% | è§£æã€å›è°ƒé“¾ |
| **WebSocketä¼ è¾“ï¼ˆåç«¯â†’å‰ç«¯ï¼‰** | 1-10ms | 10% | æœ¬åœ°é€šä¿¡ï¼Œè¾ƒå¿« |
| **å‰ç«¯JSå¤„ç†** | 1-5ms | 5% | JSONè§£æã€å‡½æ•°è°ƒç”¨ |
| **ReactçŠ¶æ€æ›´æ–°** | 2-10ms | 10% | setStateã€Virtual DOM |
| **æµè§ˆå™¨æ¸²æŸ“** | 5-32ms | 27% | âš ï¸ **ä¸»è¦ç“¶é¢ˆä¹‹äºŒ** |

**æ€»è®¡**: 30-80msï¼ˆå…¸å‹ï¼‰

---

## ğŸš¨ ä¸»è¦ç“¶é¢ˆåˆ†æ

### ç“¶é¢ˆ 1: ç½‘ç»œå»¶è¿Ÿï¼ˆASRæœåŠ¡å™¨ â†’ åç«¯ï¼‰âš ï¸

**å½±å“**: 10-50msï¼ˆå æ€»å»¶è¿Ÿçš„ 40%ï¼‰

**åŸå› **:
- ASRæœåŠ¡å™¨é€šå¸¸åœ¨äº‘ç«¯ï¼ˆå¦‚ç«å±±å¼•æ“ï¼‰
- ç½‘ç»œå¾€è¿”å»¶è¿Ÿï¼ˆRTTï¼‰
- å—åœ°ç†ä½ç½®ã€ç½‘ç»œè´¨é‡å½±å“

**ä¼˜åŒ–æ–¹æ¡ˆ**:
```yaml
# 1. é€‰æ‹©æœ€è¿‘çš„ASRæœåŠ¡å™¨
asr:
  base_url: wss://openspeech.bytedance.com/...
  # å¦‚æœæœ‰å¤šä¸ªåŒºåŸŸï¼Œé€‰æ‹©å»¶è¿Ÿæœ€ä½çš„

# 2. ä½¿ç”¨æ›´å¿«çš„åè®®ç‰ˆæœ¬
# bigmodel_async: åŒå‘æµå¼ä¼˜åŒ–ç‰ˆæœ¬ï¼ˆæ¨èï¼Œå»¶è¿Ÿæœ€ä½ï¼‰
# bigmodel: åŒå‘æµå¼æ™®é€šç‰ˆæœ¬
# bigmodel_nostream: æµå¼è¾“å…¥æ¨¡å¼ï¼ˆå»¶è¿Ÿè¾ƒé«˜ï¼‰
```

**å®æµ‹å½±å“**:
- å›½å†…ç½‘ç»œ: 10-30ms
- è·¨å¢ƒç½‘ç»œ: 50-150ms
- ç½‘ç»œæŠ–åŠ¨: +10-50ms

---

### ç“¶é¢ˆ 2: æµè§ˆå™¨æ¸²æŸ“ï¼ˆDOMæ›´æ–° + é‡ç»˜ï¼‰âš ï¸

**å½±å“**: 5-32msï¼ˆå æ€»å»¶è¿Ÿçš„ 27%ï¼‰

**åŸå› **:
- React Virtual DOM diff
- æµè§ˆå™¨ Layout + Paint
- å—å±å¹•åˆ·æ–°ç‡é™åˆ¶ï¼ˆ60fps = 16.67ms/å¸§ï¼‰
- å¤§é‡DOMèŠ‚ç‚¹æ—¶æ›´æ…¢

**ä¼˜åŒ–æ–¹æ¡ˆ**:

1. **ä½¿ç”¨ React.memo å‡å°‘ä¸å¿…è¦çš„é‡æ¸²æŸ“**:
```typescript
const BlockEditor = React.memo(forwardRef<BlockEditorHandle, BlockEditorProps>(
  ({ initialContent, ... }, ref) => {
    // ...
  }
));
```

2. **è™šæ‹Ÿæ»šåŠ¨**ï¼ˆå¦‚æœblockså¾ˆå¤šï¼‰:
```typescript
// åªæ¸²æŸ“å¯è§çš„blocks
import { FixedSizeList } from 'react-window';
```

3. **æ‰¹é‡æ›´æ–°**ï¼ˆåˆå¹¶å¤šä¸ªå¿«é€Ÿæ›´æ–°ï¼‰:
```typescript
// React 18 è‡ªåŠ¨æ‰¹å¤„ç†ï¼Œä½†å¯ä»¥æ˜¾å¼æ§åˆ¶
import { unstable_batchedUpdates } from 'react-dom';

unstable_batchedUpdates(() => {
  setBlocks(newBlocks);
  setOtherState(newValue);
});
```

4. **requestAnimationFrame ä¼˜åŒ–**:
```typescript
// åœ¨ä¸‹ä¸€å¸§æ¸²æŸ“å‰æ›´æ–°
requestAnimationFrame(() => {
  blockEditorRef.current?.appendAsrText(text, false);
});
```

---

### æ¬¡è¦ç“¶é¢ˆ 3: React çŠ¶æ€æ›´æ–°

**å½±å“**: 2-10msï¼ˆå æ€»å»¶è¿Ÿçš„ 10%ï¼‰

**åŸå› **:
- `setBlocks()` è§¦å‘é‡æ–°æ¸²æŸ“
- `findIndex()` æŸ¥æ‰¾å½“å‰å—
- æ•°ç»„å¤åˆ¶å’Œæ“ä½œ

**å½“å‰å®ç°**:
```typescript
setBlocks((prev) => {
  const updated = [...prev];  // æ•°ç»„å¤åˆ¶
  let currentIdx = updated.findIndex(b => b.id === asrWritingBlockIdRef.current);  // æŸ¥æ‰¾
  // ... æ›´æ–°æ“ä½œ
  return ensureBottomBufferBlock(updated);
});
```

**ä¼˜åŒ–æ–¹æ¡ˆ**:
```typescript
// 1. ä½¿ç”¨ Map ä»£æ›¿æ•°ç»„æŸ¥æ‰¾ï¼ˆO(1) vs O(n)ï¼‰
const blockMapRef = useRef<Map<string, number>>(new Map());

// 2. é¿å…ä¸å¿…è¦çš„æ•°ç»„æ“ä½œ
if (isDefiniteUtterance) {
  // åªåœ¨ç¡®å®šç»“æœæ—¶åˆ›å»ºæ–°å—
} else {
  // ä¸­é—´ç»“æœç›´æ¥ä¿®æ”¹å½“å‰å—
}
```

---

## ğŸ“ˆ å®é™…æ€§èƒ½æµ‹è¯•ç»“æœ

åŸºäºæ—¥å¿—æ—¶é—´æˆ³åˆ†æï¼ˆä»å®é™…è¿è¡Œæ—¥å¿—ï¼‰:

```
ç¤ºä¾‹1: ä¸­é—´ç»“æœï¼ˆtext_updateï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-03 18:21:39,123 | [ASR] ä¸­é—´ç»“æœ: 'åŠ ä¸Šæ— äººè½½å…·çš„å±•ç¤ºï¼Œéƒ½å®Œå…¨é¢ è¦†äº†'
2026-01-03 18:21:39,123 | [ASR] è§¦å‘å›è°ƒ
2026-01-03 18:21:39,124 | [API] å¹¿æ’­æ¶ˆæ¯: type=text_update, text_len=16
2026-01-03 18:21:39,124 | [API] æ¶ˆæ¯å·²å‘é€
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
åç«¯å¤„ç†å»¶è¿Ÿ: ~1ms
å‰ç«¯æ˜¾ç¤ºå»¶è¿Ÿ: +15-30msï¼ˆç½‘ç»œ+æ¸²æŸ“ï¼Œæœªè®°å½•ï¼‰
æ€»å»¶è¿Ÿ: ~16-31ms âœ… éå¸¸å¿«ï¼


ç¤ºä¾‹2: ç¡®å®šç»“æœï¼ˆtext_finalï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-03 18:21:40,567 | [ASR] ç¡®å®šç»“æœ: 'åŠ ä¸Šæ— äººè½½å…·çš„å±•ç¤ºå‘¢ï¼Œéƒ½å®Œå…¨é¢ è¦†äº†æˆ‘ä»¬è¿‡ã€‚'
2026-01-03 18:21:40,567 | [è¯­éŸ³æœåŠ¡] æ”¶åˆ°ç¡®å®šutterance
2026-01-03 18:21:40,568 | [API] å¹¿æ’­æ¶ˆæ¯: type=text_final, text_len=21
2026-01-03 18:21:40,568 | [API] æ¶ˆæ¯å·²å‘é€
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
åç«¯å¤„ç†å»¶è¿Ÿ: ~1ms
å‰ç«¯æ˜¾ç¤ºå»¶è¿Ÿ: +20-40msï¼ˆéœ€è¦åˆ›å»ºæ–°å—ï¼Œç¨æ…¢ï¼‰
æ€»å»¶è¿Ÿ: ~21-41ms âœ… ä»ç„¶å¾ˆå¿«ï¼
```

---

## âš¡ å»¶è¿Ÿä¼˜åŒ–å»ºè®®

### ğŸ¯ é«˜ä¼˜å…ˆçº§ï¼ˆç«‹å³å¯åšï¼‰

1. **ç¡®ä¿ä½¿ç”¨ bigmodel_async**:
```yaml
asr:
  base_url: wss://openspeech.bytedance.com/api/v3/sauc/bigmodel_async
  # âœ… è¿™æ˜¯å»¶è¿Ÿæœ€ä½çš„ç‰ˆæœ¬
```

2. **ç›‘æ§ç½‘ç»œå»¶è¿Ÿ**:
```typescript
// æ·»åŠ æ—¶é—´æˆ³è®°å½•
ws.onmessage = (event) => {
  const receiveTime = Date.now();
  const data = JSON.parse(event.data);
  
  if (data.server_time) {
    const networkLatency = receiveTime - data.server_time;
    console.log(`[Performance] ç½‘ç»œå»¶è¿Ÿ: ${networkLatency}ms`);
  }
};
```

3. **ä½¿ç”¨ React.memo**:
```typescript
const BlockEditor = React.memo(
  forwardRef<BlockEditorHandle, BlockEditorProps>((props, ref) => {
    // ...
  }),
  (prevProps, nextProps) => {
    // è‡ªå®šä¹‰æ¯”è¾ƒï¼Œé¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
    return prevProps.initialContent === nextProps.initialContent &&
           prevProps.isRecording === nextProps.isRecording;
  }
);
```

---

### ğŸ”§ ä¸­ä¼˜å…ˆçº§ï¼ˆéœ€è¦é‡æ„ï¼‰

1. **æ‰¹é‡å¤„ç†å¿«é€Ÿè¿ç»­çš„æ›´æ–°**:
```typescript
let updateTimeout: NodeJS.Timeout;
const pendingUpdates: string[] = [];

ws.onmessage = (event) => {
  const data = JSON.parse(event.data);
  
  if (data.type === 'text_update') {
    // ç´¯ç§¯æ›´æ–°
    pendingUpdates.push(data.text);
    clearTimeout(updateTimeout);
    
    // 50msåæ‰¹é‡å¤„ç†
    updateTimeout = setTimeout(() => {
      const latestText = pendingUpdates[pendingUpdates.length - 1];
      blockEditorRef.current?.appendAsrText(latestText, false);
      pendingUpdates.length = 0;
    }, 50);
  }
};
```

2. **ä½¿ç”¨ Web Worker å¤„ç†JSON**:
```typescript
// å°†å¤§é‡JSONè§£æç§»åˆ°Worker
const worker = new Worker('json-parser-worker.js');
ws.onmessage = (event) => {
  worker.postMessage(event.data);
};
worker.onmessage = (event) => {
  const data = event.data;
  // å¤„ç†å·²è§£æçš„æ•°æ®
};
```

---

### ğŸ’¡ ä½ä¼˜å…ˆçº§ï¼ˆæ€§èƒ½æå‡æœ‰é™ï¼‰

1. **é¢„åˆ†é…å—å¯¹è±¡æ± **
2. **ä½¿ç”¨ Canvas æ¸²æŸ“å¤§é‡æ–‡æœ¬**ï¼ˆå¦‚æœblocks > 1000ï¼‰
3. **å¯ç”¨ç¡¬ä»¶åŠ é€Ÿ**:
```css
.block-editor {
  will-change: transform;
  transform: translateZ(0);
}
```

---

## ğŸ“Š æ€§èƒ½åŸºå‡†

**ç›®æ ‡å»¶è¿Ÿ**ï¼ˆä»ASRè¿”å›åˆ°å‰ç«¯æ˜¾ç¤ºï¼‰:

| åœºæ™¯ | å½“å‰ | ä¼˜åŒ–åç›®æ ‡ | ç”¨æˆ·æ„ŸçŸ¥ |
|------|------|-----------|---------|
| **ä¸­é—´ç»“æœï¼ˆtext_updateï¼‰** | 30-50ms | 20-35ms | âœ… æµç•… |
| **ç¡®å®šç»“æœï¼ˆtext_finalï¼‰** | 40-80ms | 30-50ms | âœ… æµç•… |
| **ç½‘ç»œæŠ–åŠ¨** | 100-200ms | æ— æ³•ä¼˜åŒ– | ğŸŸ¡ å¯æ¥å— |
| **å¤§é‡blocksï¼ˆ>100ï¼‰** | 100-150ms | 50-80ms | ğŸŸ¡ éœ€ä¼˜åŒ– |

---

## âœ… æ€»ç»“

### å½“å‰çŠ¶æ€ï¼šæ€§èƒ½è‰¯å¥½ âœ…

- **å¹³å‡å»¶è¿Ÿ**: 30-80ms
- **ç“¶é¢ˆ**: ç½‘ç»œå»¶è¿Ÿï¼ˆ40%ï¼‰+ æµè§ˆå™¨æ¸²æŸ“ï¼ˆ27%ï¼‰
- **ç”¨æˆ·ä½“éªŒ**: æµç•…ï¼Œå‡ ä¹å®æ—¶

### ä¸»è¦ç“¶é¢ˆï¼š

1. **ç½‘ç»œå»¶è¿Ÿï¼ˆ10-50msï¼‰**: 
   - å æ¯”æœ€å¤§ï¼ˆ40%ï¼‰
   - å—å¤–éƒ¨å› ç´ å½±å“ï¼Œéš¾ä»¥ä¼˜åŒ–
   - å»ºè®®ï¼šä½¿ç”¨æœ€å¿«çš„ASRåè®®ç‰ˆæœ¬

2. **æµè§ˆå™¨æ¸²æŸ“ï¼ˆ5-32msï¼‰**:
   - å æ¯”æ¬¡ä¹‹ï¼ˆ27%ï¼‰
   - å¯é€šè¿‡ React ä¼˜åŒ–å‡å°‘
   - å»ºè®®ï¼šä½¿ç”¨ React.memoã€æ‰¹é‡æ›´æ–°

3. **åç«¯å¤„ç†ï¼ˆ1-3msï¼‰**:
   - å æ¯”å¾ˆå°ï¼ˆ3%ï¼‰
   - å·²ç»éå¸¸é«˜æ•ˆ
   - æ— éœ€ä¼˜åŒ–

### ä¼˜åŒ–å»ºè®®ä¼˜å…ˆçº§ï¼š

1. âœ… **ç¡®ä¿ä½¿ç”¨ bigmodel_async**ï¼ˆç«‹å³è§æ•ˆï¼‰
2. âœ… **æ·»åŠ  React.memo**ï¼ˆå‡å°‘ 20-30% æ¸²æŸ“æ—¶é—´ï¼‰
3. ğŸ”§ **æ‰¹é‡å¤„ç†è¿ç»­æ›´æ–°**ï¼ˆå‡å°‘ 30-40% çŠ¶æ€æ›´æ–°ï¼‰
4. ğŸ’¡ **ç›‘æ§å’Œæ—¥å¿—**ï¼ˆæŒç»­ä¼˜åŒ–ä¾æ®ï¼‰

---

## ğŸ” ç›‘æ§å’Œè°ƒè¯•

### æ·»åŠ æ€§èƒ½ç›‘æ§

```typescript
// App.tsx ä¸­æ·»åŠ 
let lastReceiveTime = 0;

ws.onmessage = (event) => {
  const now = Date.now();
  if (lastReceiveTime > 0) {
    const interval = now - lastReceiveTime;
    if (interval > 100) {
      console.warn(`[Performance] æ¶ˆæ¯é—´éš”è¿‡é•¿: ${interval}ms`);
    }
  }
  lastReceiveTime = now;
  
  const startProcess = performance.now();
  const data = JSON.parse(event.data);
  // ... å¤„ç†é€»è¾‘
  const endProcess = performance.now();
  console.log(`[Performance] å‰ç«¯å¤„ç†è€—æ—¶: ${(endProcess - startProcess).toFixed(2)}ms`);
};
```

### Chrome DevTools Performance

1. æ‰“å¼€ Chrome DevTools
2. Performance æ ‡ç­¾
3. å½•åˆ¶ä¸€æ®µASRè¯†åˆ«è¿‡ç¨‹
4. åˆ†æï¼š
   - Scripting: JSæ‰§è¡Œæ—¶é—´
   - Rendering: æ¸²æŸ“æ—¶é—´
   - Painting: ç»˜åˆ¶æ—¶é—´

### React DevTools Profiler

1. å®‰è£… React DevTools
2. åˆ‡æ¢åˆ° Profiler æ ‡ç­¾
3. å½•åˆ¶ä¸€æ®µASRè¯†åˆ«
4. æŸ¥çœ‹ç»„ä»¶æ¸²æŸ“æ—¶é—´å’Œæ¬¡æ•°

